# Сервис уведомлений

----------

### Стэк технологий:

* Python == 3.10
* django == 4.1.3
* djangorestframework == 3.14.0
* python-dotenv == 0.21.0
* gunicorn == 20.1.0
* psycopg2-binary == 2.9.5
* requests == 2.28.1
* celery == 5.2.7
* redis == 4.3.4
* eventlet == 0.33.2

### Основное задание

* Спроектировать и разработать сервис, который по заданным правилам запускает рассылку по списку клиентов.

### Описание проекта

* Необходимо реализовать методы создания новой рассылки, просмотра созданных и получения статистики по выполненным
  рассылкам.


* Реализовать сам сервис отправки уведомлений на внешнее API.


* Опционально вы можете выбрать любое количество дополнительных пунктов описанных после основного.

### Логика рассылки

1) После создания новой рассылки, если текущее время больше времени начала и меньше времени окончания - должны быть
   выбраны
   из справочника все клиенты, которые подходят под значения фильтра, указанного в этой рассылке и запущена отправка для
   всех этих клиентов.


2) Если создаётся рассылка с временем старта в будущем - отправка должна стартовать автоматически по наступлению этого
   времени без дополнительных действий со стороны пользователя системы.


3) По ходу отправки сообщений должна собираться статистика (см. описание сущности "сообщение" выше) по каждому сообщению
   для последующего формирования отчётов.


4) Внешний сервис, который принимает отправляемые сообщения, может долго обрабатывать запрос, отвечать некорректными
   данными, на какое-то время вообще не принимать запросы. Необходимо реализовать корректную обработку подобных ошибок.
   Проблемы с внешним сервисом не должны влиять на стабильность работы разрабатываемого сервиса рассылок.

## Установка и запуск

```bash
# - Скачиваем проект.
git clone git@github.com:cookievii/test-task-notification-service.git

# - Переходим в директорию проекта 
cd test-task-notification-service

# - .env файл добавлен в проект для проверки тестового задания
# - Остается только запустить docker-compose
docker-compose up
````

***

## Энтпоинты для работы:

```GET``` ```http://127.0.0.1/api/``` - Api Root

```GET``` ```http://127.0.0.1/api/clients/``` - Client List

```GET``` ```http://127.0.0.1/api/clients/{int}/``` - Client Instance

```POST, UPDATE, DELETE, PUT``` ```http://127.0.0.1/api/clients/``` - Create, update, delete and put Client

```GET``` ```http://127.0.0.1/api/messages/``` - Message List

```GET``` ```http://127.0.0.1/api/mailings/``` - Mailing stats List

```GET``` ```http://127.0.0.1/api/mailings/{int}/``` - Mailing stats detail

```POST``` ```http://127.0.0.1/api/mailings/``` - Create mailings


----------

### MIT License:

Copyright (c) 2022 [cookievii](https://github.com/cookievii)

